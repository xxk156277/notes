# 计算机网路

https://www.cnblogs.com/wuwuyong/p/12198928.html

[[toc]]

### 1. TCP/IP 协议分层管理

物理层

该层负责 比特流在节点之间的传输，即负责物理传输，这一层的协议既与链路有关，也与传输的介质有关。通俗来说就是把计算机连接起来的物理手段。

数据链路层

控制网络层与物理层之间的通信，主要功能是保证物理线路上进行可靠的数据传递。为了保证传输，从网络层接收到的数据被分割成特定的可被物理层传输的帧。帧是用来移动数据结构的结构包，他不仅包含原始数据，还包含发送方和接收方的物理地址以及纠错和控制信息。其中的地址确定了帧将发送到何处，而纠错和控制信息则确保帧无差错到达。如果在传达数据时，接收点检测到所传数据中有差错，就要通知发送方重发这一帧。

网络层

决定如何将数据从发送方路由到接收方。网络层通过综合考虑发送优先权，网络拥塞程度，服务质量以及可选路由的花费等来决定从网络中的 A 节点到 B 节点的最佳途径。即建立主机到主机的通信。

传输层

该层为两台主机上的应用程序提供端到端的通信。传输层有两个传输协议：TCP(传输控制协议)和 UDP(用户数据报协议)。其中，TCP 是一个可靠的面向连接的协议，udp 是不可靠的或者说无连接的协议

应用层

应用程序收到传输层的数据后，接下来就要进行解读。解读必须事先规定好格式，而应用层就是规定应用程序的数据格式。主要的协议有：HTTP.FTP,Telent 等。

### 2. [三次握手四次挥手机制及原因][https://blog.csdn.net/petterp/article/details/102779131]

**三次握手**：

第一次握手：建立连接。客户端发送连接请求报文段，并将 syn(标记位)设置为 1，Squence Number(数据包序号)(seq)为 x,接下来等待服务端确认，客户端进入 SYN_SENT 状态(请求连接)；

第二次握手：服务端收到客户端的 SYN 报文段，对 SYN 报文段进行确认，设置 ack(确认号)为 x+1(即 seq+1 ; 同时自己还要发送 SYN 请求信息，将 SYN 设置为 1, seq 为 y。服务端将上述所有信息放到 SYN+ACK 报文段中，一并发送给客户端，此时服务器进入 SYN_RECV 状态。

SYN_RECV 是指,服务端被动打开后,接收到了客户端的 SYN 并且发送了 ACK 时的状态。再进一步接收到客户端的 ACK 就进入 ESTABLISHED 状态。

第三次握手：客户端收到服务端的 SYN+ACK(确认符) 报文段；然后将 ACK 设置为 y+1,向服务端发送 ACK 报文段，这个报文段发送完毕后，客户端和服务端都进入 ESTABLISHED(连接成功)状态，完成 TCP 的三次握手。
**四次挥手：**

第一次挥手

客户端设置 seq 和 ACK ,向服务器发送一个 FIN(终结)报文段。此时，客户端进入 FIN_WAIT_1 状态，表示客户端没有数据要发送给服务端了。

第二次挥手

服务端收到了客户端发送的 FIN 报文段，向客户端回了一个 ACK 报文段。

第三次挥手

服务端向客户端发送 FIN 报文段，请求关闭连接，同时服务端进入 LAST_ACK 状态。

第四次挥手

客户端收到服务端发送的 FIN 报文段后，向服务端发送 ACK 报文段,然后客户端进入 TIME_WAIT 状态。服务端收到客户端的 ACK 报文段以后，就关闭连接。此时，客户端等待 2MSL（指一个片段在网络中最大的存活时间）后依然没有收到回复，则说明服务端已经正常关闭，这样客户端就可以关闭连接了。
**原因：**

1.  **为什么要三次握手？**
    为了防止已失效的连接请求报文突然又传送到了服务端，因为产生错误。

    **具体解释：** “已失效的连接请求报文段”产生情况：

    client 发出的第一个连接请求报文段并没有丢失，而是在某个网络节点长时间滞留，因此导致延误到连接释放以后的某个时间才到达 service。如果没有三次握手，那么此时 server 收到此失效的连接请求报文段，就误认为是 client 再次发出的一个新的连接请求，于是向 client 发出确认报文段，同意建立连接，而此时 client 并没有发出建立连接的情况，因此并不会理会服务端的响应，而 service 将会一直等待 client 发送数据，因此就会导致这条连接线路白白浪费。

    **如果此时变成两次挥手行不行？**

    这个时候需要明白全双工与半双工，再进行回答。比如：

    第一次握手： A 给 B 打电话说，你可以听到我说话吗？
    第二次握手： B 收到了 A 的信息，然后对 A 说： 我可以听得到你说话啊，你能听得到我说话吗？
    第三次握手： A 收到了 B 的信息，然后说可以的，我要给你发信息啦！
    **在三次握手之后，A 和 B 都能确定这么一件事： 我说的话，你能听到； 你说的话，我也能听到**。 这样，就可以开始正常通信了，如果是两次，那将无法确定。

2.  **为什么要四次挥手？**
    TCP 协议是一种面向连接，可靠，基于字节流的传输层通信协议。TCP 是全双工模式(同一时刻可以同时发送和接收)，这就意味着，当主机 1 发出 FIN 报文段时，只是表示主机 1 已结没有数据要发送了，主机 1 告诉主机 2，它的数据已经全部发送完毕；但是，这个时候主机 1 还是可以接受来自主机 2 的数据；当主机 2 返回 ACK 报文段时，这个时候就表示主机 2 也没有数据要发送了，就会告诉主机 1，我也没有数据要发送了，之后彼此就会中断这次 TCP 连接。

![woshou](https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA2eThtTjZseTFnOGQycDJzN2tnajMwOHIwOXRkZ2MuanBn?x-oss-process=image/format,png)

### 3. HTTP 方法

| 序号 | 方法    | 描述                                                                                                                                                                                                                                                                                 |
| ---- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1    | GET     | 发送请求来获得服务器上的资源，请求体中不会包含请求数据，请求数据放在协议头中。另外 get 支持快取、缓存、可保留书签等。幂等                                                                                                                                                            |
| 2    | POST    | 和 get 一样很常见，向服务器提交资源让服务器处理，比如提交表单、上传文件等，可能导致建立新的资源或者对原有资源的修改。提交的资源放在请求体中。不支持快取。非幂等                                                                                                                      |
| 3    | HEAD    | 本质和 get 一样，但是响应中没有呈现数据，而是 http 的头信息，主要用来检查资源或超链接的有效性或是否可以可达、检查网页是否被串改或更新，获取头信息等，特别适用在有限的速度和带宽下。                                                                                                  |
| 4    | PUT     | 和 post 类似，html 表单不支持，发送资源与服务器，并存储在服务器指定位置，要求客户端事先知道该位置；比如 post 是在一个集合上（/province），而 put 是具体某一个资源上（/province/123）。所以 put 是安全的，无论请求多少次，都是在 123 上更改，而 post 可能请求几次创建了几次资源。幂等 |
| 5    | DELETE  | 请求服务器删除某资源。和 put 都具有破坏性，可能被防火墙拦截。如果是 https 协议，则无需担心。幂等                                                                                                                                                                                     |
| 6    | CONNECT | HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。就是把服务器作为跳板，去访问其他网页然后把数据返回回来，连接成功后，就可以正常的 get、post 了。                                                                                                                             |
| 7    | OPTIONS | 获取 http 服务器支持的 http 请求方法，允许客户端查看服务器的性能，比如 ajax 跨域时的预检等。                                                                                                                                                                                         |
| 8    | TRACE   | 回显服务器收到的请求，主要用于测试或诊断。一般禁用，防止被恶意攻击或盗取信息。                                                                                                                                                                                                       |

### 4. GET 和 POST 的区别

|                   | GET                                                    | POST                                                                               |
| ----------------- | ------------------------------------------------------ | ---------------------------------------------------------------------------------- |
| 点击返回/刷新按钮 | 没有影响                                               | 数据会重新提交                                                                     |
| 缓存/添加书签     | 可以                                                   | 不可以                                                                             |
| 历史记录          | 有                                                     | 没有                                                                               |
| 编码类型          | application/x-www-form-urlencoded                      | application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码 |
| 是否幂等          | 幂等                                                   | 非幂等                                                                             |
| 长度限制          | http 协议没有限制，但是实际浏览器或服务器有(最大 2048) | 理论上没有，可能会收到服务器配置或内存限制                                         |
| 数据类型限制      | 只能 ASCII，非 ascii 都要编码传输                      | 没有限制，允许二进制数据                                                           |
| 安全性            | 数据全部展示在 url 中，不安全                          | 相比 get，通过 request body 传递数据，比较安全                                     |
| 可见效            | 可见                                                   | 不可见                                                                             |

5. HTTP 建立持久连接的意义

6. HTTP 报文的结构

7. HTTP 状态码

8. Web 服务器及其组成

9. HTTP 报文首部

10. HTTP 通用首部字段

11. HTTP 请求首部字段、响应首部字段、实体首部字段

12. Cookie 相关首部字段

13. HTTPS 与 HTTP 区别及实现方式

14. Cookie 与 Session

15. 基于 HTTP 的功能追加协议（SPY、WebSocket、HTTP）

16. 常见的 Web 攻击分类

17. TCP 与 UDP 区别

    ![f02d2e56902e399bddc9218c55f681b](https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA2eThtTjZseTFnOGQydGpzMm93ajMwbDUwZDNkamkuanBn?x-oss-process=image/format,png)

18. 存储机制 localStorage、sessionStorage 与 Cookie 存储技术

19. XSS 攻击及防御

20. CSRF 攻击及防御
