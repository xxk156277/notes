<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javascript | Xxk&#39;notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/notes/assets/css/0.styles.04c41152.css" as="style"><link rel="preload" href="/notes/assets/js/app.07575453.js" as="script"><link rel="preload" href="/notes/assets/js/2.3eba13e5.js" as="script"><link rel="preload" href="/notes/assets/js/4.5e24ac21.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.e42fcb09.js"><link rel="prefetch" href="/notes/assets/js/11.cf9c4e89.js"><link rel="prefetch" href="/notes/assets/js/12.8716224a.js"><link rel="prefetch" href="/notes/assets/js/13.4d996839.js"><link rel="prefetch" href="/notes/assets/js/14.887ab298.js"><link rel="prefetch" href="/notes/assets/js/15.6f9d2279.js"><link rel="prefetch" href="/notes/assets/js/16.eac91036.js"><link rel="prefetch" href="/notes/assets/js/17.dfa56d25.js"><link rel="prefetch" href="/notes/assets/js/18.c0dd440e.js"><link rel="prefetch" href="/notes/assets/js/19.8772fd2d.js"><link rel="prefetch" href="/notes/assets/js/20.01d8f327.js"><link rel="prefetch" href="/notes/assets/js/21.bd9c35a0.js"><link rel="prefetch" href="/notes/assets/js/22.c49495d1.js"><link rel="prefetch" href="/notes/assets/js/23.1cdb2aaf.js"><link rel="prefetch" href="/notes/assets/js/24.45902c8f.js"><link rel="prefetch" href="/notes/assets/js/25.ec350de2.js"><link rel="prefetch" href="/notes/assets/js/26.0122d4b3.js"><link rel="prefetch" href="/notes/assets/js/3.87a95941.js"><link rel="prefetch" href="/notes/assets/js/5.8e40db70.js"><link rel="prefetch" href="/notes/assets/js/6.cb7cec23.js"><link rel="prefetch" href="/notes/assets/js/7.b4fa344a.js"><link rel="prefetch" href="/notes/assets/js/8.068642c5.js"><link rel="prefetch" href="/notes/assets/js/9.b2378d13.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.04c41152.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><img src="/notes/guagua.jpg" alt="Xxk'notes" class="logo"> <span class="site-name can-hide">Xxk'notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页|Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/experience/" class="nav-link router-link-active">
  面经
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Algorithm/" class="nav-link">
  Algorithm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他 | Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他 | Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Others/" class="nav-link">
  随想
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页|Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/experience/" class="nav-link router-link-active">
  面经
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Algorithm/" class="nav-link">
  Algorithm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他 | Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他 | Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Others/" class="nav-link">
  随想
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面经</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/experience/计算机基础.html" class="sidebar-link">计算机网路</a></li><li><a href="/notes/experience/css-html.html" class="sidebar-link">css-html</a></li><li><a href="/notes/experience/javascript.html" aria-current="page" class="active sidebar-link">javascript</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/experience/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/notes/experience/前端手撕代码.html" class="sidebar-link">手撕代码</a></li><li><a href="/notes/experience/vue.html" class="sidebar-link">Vue</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> javascript</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-原始值和引用值类型及区别">1.原始值和引用值类型及区别</a></li><li><a href="#_2-判断数据类型-typeof、instanceof、object-prototype-tostring-call-、constructor">2.判断数据类型 typeof、instanceof、Object.prototype.toString.call()、constructor</a></li><li><a href="#_3-类数组与数组的区别与转换">3.类数组与数组的区别与转换</a></li><li><a href="#_4-数组的常见-api">4.数组的常见 API</a></li><li><a href="#_5-bind、call、apply-的区别-https-zhuanlan-zhihu-com-p-71553017">5.[bind、call、apply 的区别][https://zhuanlan.zhihu.com/p/71553017]</a></li><li><a href="#_6-new-的原理-https-www-zhihu-com-question-36440948-answer-71234418">6.[new 的原理][https://www.zhihu.com/question/36440948/answer/71234418]</a></li><li><a href="#_7-如何正确判断-this-https-zhuanlan-zhihu-com-p-26766112">7.[如何正确判断 this?][https://zhuanlan.zhihu.com/p/26766112]</a></li><li><a href="#_8-闭包及其作用-https-zh-javascript-info-closure">8.[闭包及其作用][https://zh.javascript.info/closure]</a></li><li><a href="#_9-原型和原型链">9.原型和原型链</a></li><li><a href="#_10-prototype-与-proto-的关系与区别">10.prototype 与proto的关系与区别</a></li><li><a href="#_11-继承的实现方式及比较">11.继承的实现方式及比较</a></li><li><a href="#_12-深拷贝与浅拷贝">12.深拷贝与浅拷贝</a></li><li><a href="#_13-防抖和节流">13.防抖和节流</a></li><li><a href="#_14-作用域和作用域链、执行期上下文">14.作用域和作用域链、执行期上下文</a></li><li><a href="#_15-dom-常见的操作方式">15.DOM 常见的操作方式</a></li><li><a href="#_16-array-sort-方法与实现机制">16.Array.sort()方法与实现机制</a></li><li><a href="#_17-ajax-的请求过程">17.Ajax 的请求过程</a></li><li><a href="#_18-js-的垃圾回收机制">18.JS 的垃圾回收机制</a></li><li><a href="#_19-js-中的-string、array-和-math-方法">19.JS 中的 String、Array 和 Math 方法</a></li><li><a href="#_20-addeventlistener-和-onclick-的区别">20.addEventListener 和 onClick()的区别</a></li><li><a href="#_21-new-和-object-create-的区别">21.new 和 Object.create 的区别</a></li><li><a href="#_22-dom-的-location-对象">22.DOM 的 location 对象</a></li><li><a href="#_23-浏览器从输入-url-到页面渲染的整个流程-涉及到计算机网络数据传输过程、浏览器解析渲染过程">23.浏览器从输入 URL 到页面渲染的整个流程（涉及到计算机网络数据传输过程、浏览器解析渲染过程）</a></li><li><a href="#_24-跨域、同源策略及跨域实现方式和原理">24.跨域、同源策略及跨域实现方式和原理</a></li><li><a href="#_25-浏览器的回流-reflow-和重绘-repaints">25.浏览器的回流（Reflow）和重绘（Repaints）</a></li><li><a href="#_26-javascript-中的-arguments">26.JavaScript 中的 arguments</a></li><li><a href="#_27-eventloop-事件循环">27.EventLoop 事件循环</a></li><li><a href="#_28-宏任务与微任务">28.宏任务与微任务</a></li><li><a href="#_29-bom-属性对象方法">29.BOM 属性对象方法</a></li><li><a href="#_30-函数柯里化及其通用封装">30.函数柯里化及其通用封装</a></li><li><a href="#_31js-的-map-和-reduce-方法">31JS 的 map()和 reduce()方法</a></li><li><a href="#_32-和-的区别">32.“\=\=”和“\=\==”的区别</a></li><li><a href="#_33-settimeout-用作倒计时为何会产生误差">33.setTimeout 用作倒计时为何会产生误差？</a></li><li><a href="#_34-一段帮助理解作用域、作用域链-执行上下文-闭包的代码">34.一段帮助理解作用域、作用域链，执行上下文，闭包的代码</a></li><li><a href="#_35-js-实现双向绑定">35.js 实现双向绑定</a></li><li><a href="#_36-object-define-property">36.object.define.property</a></li><li><a href="#_37-undefined-与-undeclared-的区别">37. undefined 与 undeclared 的区别？</a></li><li><a href="#_38-null-和-undefined-的区别">38. null 和 undefined 的区别？</a></li><li><a href="#_39-localstorage-sessionstorage-和-cookie-三种存储方式的用法和区别">39.localstorage，sessionstorage，和 cookie 三种存储方式的用法和区别</a></li><li><a href="#_40-事件冒泡捕获机制">40.事件冒泡捕获机制</a></li><li><a href="#_41-eventloop题">41.eventloop题</a></li><li><a href="#_42-轮播图">42.轮播图</a></li><li><a href="#_43-js图片懒加载">43.js图片懒加载</a></li><li><a href="#_44-v8引擎下的垃圾回收机制">44.v8引擎下的垃圾回收机制</a></li><li><a href="#_45、let-const和var的区别">45、let  const和var的区别</a></li><li><a href="#_46、set和map">46、set和map</a></li></ul></div><p></p> <h3 id="_1-原始值和引用值类型及区别"><a href="#_1-原始值和引用值类型及区别" class="header-anchor">#</a> 1.原始值和引用值类型及区别</h3> <p>js 一共有六种基本数据类型，分别是 Undefined、Null、Boolean、Number、String，还有在 ES6 中新增的 Symbol 和 ES10 中新增的 BigInt 类型。</p> <ul><li>Symbol 代表创建后独一无二且不可变的数据类型，它的出现我认为主要是为了解决可能出现的全局变量冲突的问题。</li> <li>BigInt 是一种数字类型的数据，它可以表示任意精度格式的整数，使用 BigInt 可以安全地存储和操作大整数，即使这个数已经超出了 Number 能够表示的安全整数范围。</li></ul> <p><strong>JavaScript</strong> <strong>有几种类型的值</strong>？<strong>你能画一下他们的内存图吗</strong>？</p> <ul><li>栈：原始数据类型（Undefined、Null、Boolean、Number、String、bigint、symbol）</li> <li>堆：引用数据类型（对象、数组和函数）</li></ul> <p>两种类型的区别是：存储位置不同。</p> <ol><li>原始数据类型直接存储在栈（stack）中的简单数据段，占据空间小、大小固定，属于被频繁使用数据，所以放入栈中存储。</li> <li>引用数据类型存储在堆（heap）中的对象，占据空间大、大小不固定。如果存储在栈中，将会影响程序运行的性能；引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。</li></ol> <h3 id="_2-判断数据类型-typeof、instanceof、object-prototype-tostring-call-、constructor"><a href="#_2-判断数据类型-typeof、instanceof、object-prototype-tostring-call-、constructor" class="header-anchor">#</a> 2.判断数据类型 typeof、instanceof、Object.prototype.toString.call()、constructor</h3> <p>https://blog.csdn.net/weixin_42434289/article/details/108981590</p> <h3 id="_3-类数组与数组的区别与转换"><a href="#_3-类数组与数组的区别与转换" class="header-anchor">#</a> 3.类数组与数组的区别与转换</h3> <p><strong>相同点</strong>：都可用下标访问每个元素，都有length属性。</p> <p><strong>不同点</strong>：数组对象的类型是Array,类数组对象的类型是object，也就是说类数组原型是Object;类数组不具有数组所具有的方法，数组遍历可以用 for in和for循环,类数组只能用for循环遍历。</p> <p><strong>数组转类数组</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//{ '0': 1, '1': 2, '2': 3, '3': 4, '4': 5, '5': 6, length: 6 }</span>
</code></pre></div><p><strong>类数组转数组</strong></p> <ul><li><p>Array.prototype.slice.call()</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> li <span class="token operator">=</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[ 1, 2, 3 ]</span>
</code></pre></div></li> <li><p>Array.from()</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'0'</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
    <span class="token string">'1'</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
    <span class="token string">'2'</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
    length<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[ 'a', 'b', 'c' ]</span>
</code></pre></div></li></ul> <h3 id="_4-数组的常见-api"><a href="#_4-数组的常见-api" class="header-anchor">#</a> 4.数组的常见 API</h3> <p><strong>修改原数组的</strong>API</p> <p>**pop（）：**弹出数组中最后一个元素，并返回这个元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre></div><p><strong>push（）</strong>：添加一个或多个元素到数组末尾，并返回新的长度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre></div><p><strong>shift（）</strong>：弹出数组的第一个元素，并返回这个元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p><strong>unshift（）</strong>：在数组开头添加一个或多个元素，并返回新的长度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [-1, 0, 1, 2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre></div><p><strong>splice（x，n，...）</strong>：从 x 位置开始截取，截取 n 个并返回被截取的元素，第三个参数是截取完了需要添加哪些元素，从 x 的位置开始添加</p> <p>从数组的第 1 位开始截取，截取 3 位并返回，再从第 1 位开始添加‘x’‘y’‘z’</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3, 4]</span>
</code></pre></div><p><strong>.reverse（）</strong>：逆转数组的顺序</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 5, 4, 3, 2, 1]</span>
</code></pre></div><p><strong>sort（）</strong>：给数组排序(默认从小到大)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre></div><p>sort 还可以接受一个函数作为参赛，该函数接受两个参数 a，b</p> <p>如果 a &lt; b 就返回一个负数，a 就排在 b 的前面</p> <p>如果 a === b 就返回 0，顺序不变</p> <p>如果 a &gt; b 就返回一个正数，a 就排在 b 的后面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre></div><p>可以简写为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre></div><p>同理，返回 b - a 就可以倒序排列</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 5, 4, 3, 2, 1]</span>
</code></pre></div><p><strong>返回新数组的 API</strong></p> <p><strong>concat（）</strong>：把传入的数组，或者元素+数组合并成一个新的数组，返回这个新数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre></div><p><strong>slice（）</strong>：截取数组，不会改变原数组</p> <p>从数组的第 0 位截取到数组的第 3 位</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre></div><p>如果不给第二个参数，那么就从第 1 个参数的位置截取到数组的最后</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [4, 5, 6]</span>
</code></pre></div><p><strong>join（）</strong>：把数组中的元素连接成一个字符串并返回，不会改变原数组</p> <p>可以选择用什么作为分隔符，空字符串就代表没有分隔符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '123456'</span>
</code></pre></div><p><strong>indexOf（）</strong>：查找元素在数组中第一次出现时的索引，如果没有就返回-1</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><p><strong>LastIndexOf（）</strong>：查找元素在数组中最后一次出现时的索引，如果没有就返回-1</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre></div><p><strong>数组遍历方法</strong></p> <p><strong>forEarh（）</strong>：传入一个函数，把数组的每一项作为函数的参数被调用，不改变原数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 依次输出1到6</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>map（）</strong>：传入一个函数，把数组的每一项作为函数的参数被调用，然后用函数每次的返回值组成新的数组并返回，不改变原数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">*</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 箭头函数的简写,不用写return</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 4, 9, 16, 25, 36]</span>
</code></pre></div><p><strong>filter（）</strong>：传入一个函数，把数组的每一项作为函数的参数被调用，在函数内部判断符合条件的每一项，把它们组成新的数组并返回，不改变原数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取数组中的偶数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 4, 6]</span>
</code></pre></div><p><strong>reduce（）</strong>：接受两个参数，函数和初始值，其中函数接受两个参数，那个初始值和数组的每一项，每次用初始值对数组的每一项进行操作并返回这个新的初始值（函数返回），不改变原数组</p> <p>初始值为 0，sum 代表了初始值，每次用 sum+= item，最后初始值为 21 并被返回（reduce 返回）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>sum <span class="token operator">+=</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 21</span>
</code></pre></div><h3 id="_5-bind、call、apply-的区别-https-zhuanlan-zhihu-com-p-71553017"><a href="#_5-bind、call、apply-的区别-https-zhuanlan-zhihu-com-p-71553017" class="header-anchor">#</a> 5.[bind、call、apply 的区别][https://zhuanlan.zhihu.com/p/71553017]</h3> <ul><li>三者都可以改变函数的 this 对象指向。</li> <li>三者第一个参数都是 this 要指向的对象，如果如果没有这个参数或参数为 undefined 或 null，则默认指向全局 window。</li> <li>三者都可以传参，但是 apply 是数组，而 call 是参数列表，且 apply 和 call 是一次性传入参数，而 bind 可以分为多次传入。</li> <li>bind 是返回绑定 this 之后的函数，便于稍后调用；apply 、call 则是立即执行 。</li></ul> <h3 id="_6-new-的原理-https-www-zhihu-com-question-36440948-answer-71234418"><a href="#_6-new-的原理-https-www-zhihu-com-question-36440948-answer-71234418" class="header-anchor">#</a> 6.[new 的原理][https://www.zhihu.com/question/36440948/answer/71234418]</h3> <p>要创建 Person 的新实例，必须使用 new 操作符。以这种方式调用构造函数实际上会经历以下 4 个步骤：
（1）创建一个新对象；
（2）将构造函数的作用域赋给新对象（因此 this 就指向了这个对象）；
（3）执行构造函数中的代码（为这个新对象添加属性）；
（4）返回新对象。</p> <h3 id="_7-如何正确判断-this-https-zhuanlan-zhihu-com-p-26766112"><a href="#_7-如何正确判断-this-https-zhuanlan-zhihu-com-p-26766112" class="header-anchor">#</a> 7.[如何正确判断 this?][https://zhuanlan.zhihu.com/p/26766112]</h3> <p><code>this</code>是执行上下文中的一个属性，它指向最后一次调用这个方法的对象。在实际开发中，<code>this</code>的指向可以通过四种调用模式来判断(按优先级排列)</p> <ul><li>构造器调用模式，一个函数使用 new 调用时，函数执行前会创建一个对象， this 指向这个新创建的对象;</li> <li><code>apply</code>、 <code>call</code>、 <code>bind</code> 调用模式，如果如果没有这个参数或参数为 undefined 或 null，则默认指向全局 window;</li> <li>方法调用模式，一个函数作为对象的方法调用时，<code>this</code>指向该对象;</li> <li>函数调用模式， 函数直接调用时，<code>this</code>指向全局对象</li> <li>箭头函数中没有 this，他不能使用 new 实例化，也不能使用<code>apply</code>、 <code>call</code>、 <code>bind</code>等改变 this 的指向</li></ul> <h3 id="_8-闭包及其作用-https-zh-javascript-info-closure"><a href="#_8-闭包及其作用-https-zh-javascript-info-closure" class="header-anchor">#</a> 8.[闭包及其作用][https://zh.javascript.info/closure]</h3> <p>闭包是指有权访问另一个函数作用域中变量的函数，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以访问到当前函数的局部变量。</p> <p>闭包有两个常用的用途。</p> <p>闭包的第一个用途是使我们在函数外部能够访问到函数内部的变量。通过使用闭包，我们可以通过在外部调用闭包函数，从而在外部访问到函数内部的变量，可以使用这种方法来创建私有变量。</p> <p>闭包的另一个用途是使已经运行结束的函数上下文中的变量对象继续留在内存中，因为闭包函数保留了这个变量对象的引用，所以这个变量对象不会被回收。</p> <p>其实闭包的本质就是作用域链的一个特殊的应用，只要了解了作用域链的创建过程，就能够理解闭包的实现原理。</p> <h3 id="_9-原型和原型链"><a href="#_9-原型和原型链" class="header-anchor">#</a> 9.原型和原型链</h3> <p>利用原型让一个引用类型继承另一个引用类型的属性和方法。</p> <p>缺点：</p> <ol><li>包含引用类型的原型属性会被所有实例属性共享，容易造成属性的修改混乱。</li> <li>在创建子类型的实例时，不能向超类型的构造函数中传递参数。</li></ol> <h3 id="_10-prototype-与proto的关系与区别"><a href="#_10-prototype-与proto的关系与区别" class="header-anchor">#</a> 10.prototype 与<strong>proto</strong>的关系与区别</h3> <p><img src="https://pic1.zhimg.com/80/e83bca5f1d1e6bf359d1f75727968c11_720w.jpg?source=1940ef5c" alt="proto"></p> <ol><li>对象有属性__proto__，指向该对象的构造函数的原型对象。</li> <li>方法除了有属性__proto__，还有属性 prototype，prototype 指向该方法的原型对象</li></ol> <h3 id="_11-继承的实现方式及比较"><a href="#_11-继承的实现方式及比较" class="header-anchor">#</a> 11.继承的实现方式及比较</h3> <p>（1）第一种是以原型链的方式来实现继承，但是这种实现方式存在的缺点是，在包含有引用类型的数据时，会被所有的实例对象所共享，容易造成修改的混乱。还有就是在创建子类型的时候不能向超类型传递参数。</p> <p>（2）第二种方式是使用借用构造函数的方式，这种方式是通过在子类型的函数中调用超类型的构造函数来实现的，这一种方法解决了不能向超类型传递参数的缺点，但是它存在的一个问题就是无法实现函数方法的复用，并且超类型原型定义的方法子类型也没有办法访问到。</p> <p>（3）第三种方式是组合继承，组合继承是将原型链和借用构造函数组合起来使用的一种方式。通过借用构造函数的方式来实现类型的属性的继承，通过将子类型的原型设置为超类型的实例来实现方法的继承。这种方式解决了上面的两种模式单独使用时的问题，但是由于我们是以超类型的实例来作为子类型的原型，所以调用了两次超类的构造函数，造成了子类型的原型中多了很多不必要的属性。</p> <p>（4）第四种方式是原型式继承，原型式继承的主要思路就是基于已有的对象来创建新的对象，实现的原理是，向函数中传入一个对象，然后返回一个以这个对象为原型的对象。这种继承的思路主要不是为了实现创造一种新的类型，只是对某个对象实现一种简单继承，ES5 中定义的 Object.create() 方法就是原型式继承的实现。缺点与原型链方式相同。</p> <p>（5）第五种方式是寄生式继承，寄生式继承的思路是创建一个用于封装继承过程的函数，通过传入一个对象，然后复制一个对象的副本，然后对象进行扩展，最后返回这个对象。这个扩展的过程就可以理解是一种继承。这种继承的优点就是对一个简单对象实现继承，如果这个对象不是我们的自定义类型时。缺点是没有办法实现函数的复用。</p> <p>（6）第六种方式是寄生式组合继承，组合继承的缺点就是使用超类型的实例做为子类型的原型，导致添加了不必要的原型属性。寄生式组合继承的方式是使用超类型的原型的副本来作为子类型的原型，这样就避免了创建不必要的属性。</p> <h3 id="_12-深拷贝与浅拷贝"><a href="#_12-深拷贝与浅拷贝" class="header-anchor">#</a> 12.深拷贝与浅拷贝</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 浅拷贝的实现;</span>

<span class="token keyword">function</span> <span class="token function">shallowCopy</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 只拷贝对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object <span class="token operator">||</span> <span class="token keyword">typeof</span> object <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 根据 object 的类型判断是新建一个数组还是对象</span>
  <span class="token keyword">let</span> newObject <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 遍历 object，并且判断是 object 的属性才拷贝</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newObject<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> object<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 深拷贝的实现;</span>

<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object <span class="token operator">||</span> <span class="token keyword">typeof</span> object <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> object<span class="token punctuation">;</span>

  <span class="token keyword">let</span> newObject <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newObject<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>object<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>浅拷贝指的是将一个对象的属性值复制到另一个对象，如果有的属性的值为引用类型的话，那么会将这个引用的地址复制给对象，因此两个对象会有同一个引用类型的引用。浅拷贝可以使用 Object.assign 和展开运算符来实现。</p> <p>深拷贝相对浅拷贝而言，如果遇到属性值为引用类型的时候，它新建一个引用类型并将对应的值复制给它，因此对象获得的一个新的引用类型而不是一个原有类型的引用。深拷贝对于一些对象可以使用 JSON 的两个函数来实现，但是<strong>由于 JSON 的对象格式比 js 的对象格式更加严格，所以如果属性值里边出现函数或者 Symbol 类型的值时，会转换失败</strong>。</p> <h3 id="_13-防抖和节流"><a href="#_13-防抖和节流" class="header-anchor">#</a> 13.防抖和节流</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 函数防抖： 在事件被触发 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。</span>

<span class="token comment">// 函数节流： 规定一个单位时间，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内某事件被触发多次，只有一次能生效。</span>

<span class="token comment">// 函数防抖的实现</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

    <span class="token comment">// 如果此时存在定时器的话，则取消之前的定时器重新记时</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 设置定时器，使事件间隔指定事件后执行</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数节流的实现;</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> preTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      args <span class="token operator">=</span> arguments<span class="token punctuation">,</span>
      nowTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 如果两次时间间隔超过了指定时间，则执行函数。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> preTime <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      preTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数防抖是指在事件被触发 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。这可以使用在一些点击请求的事件上，避免因为用户的多次点击向后端发送多次请求。</p> <p>函数节流是指规定一个单位时间，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内某事件被触发多次，只有一次能生效。节流可以使用在 scroll 函数的事件监听上，通过事件节流来降低事件调用的频率。</p> <h3 id="_14-作用域和作用域链、执行期上下文"><a href="#_14-作用域和作用域链、执行期上下文" class="header-anchor">#</a> 14.作用域和作用域链、执行期上下文</h3> <ul><li><p>作用域就是代码的执行环境，全局执行环境就是全局作用域，函数的执行环境就是私有作用域，它们都是栈内存。作用域就是代码执行开辟栈内存</p></li> <li><p>作用域链</p> <p>作用域链的作用是保证对执行环境有权访问的所有变量和函数的有序访问，通过作用域链，我们可以访问到外层环境的变量和函数。</p> <p>作用域链的本质上是一个指向变量对象的指针列表。变量对象是一个包含了执行环境中所有变量和函数的对象。作用域链的前端始终都是当前执行上下文的变量对象。全局执行上下文的变量对象（也就是全局对象）始终是作用域链的最后一个对象。</p> <p>当我们查找一个变量时，如果当前执行环境中没有找到，我们可以沿着作用域链向后查找。</p> <p>作用域链的创建过程跟执行上下文的建立有关....</p></li> <li><p>js 是描述性的脚本语言，是由 JS 引擎动态的解析和执行。JS 在执行代码之前，会对这段代码进行解析（预处理），这个阶段会根据<strong>可执行代码</strong>创建相应的<strong>执行上下文</strong>。</p> <blockquote><p>Js 是边执行边解析的</p></blockquote> <p>可执行代码：</p> <ul><li>全局执行代码，在执行所有代码前，解析创建全局执行上下文。</li> <li>函数执行代码，执行函数前，解析创建函数执行上下文。</li> <li>eval 执行代码，运行于当前执行上下文中。</li></ul> <p>执行上下文由 this、变量对象、作用域链三个属性组成。</p></li></ul> <h3 id="_15-dom-常见的操作方式"><a href="#_15-dom-常见的操作方式" class="header-anchor">#</a> 15.DOM 常见的操作方式</h3> <p>（1）创建新节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">createElement</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">createTextNode</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>（2）添加、移除、替换、插入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
<span class="token function">removeChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
<span class="token function">replaceChild</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">,</span>old<span class="token punctuation">)</span>
<span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">,</span>old<span class="token punctuation">)</span>
</code></pre></div><p>（3）查找</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>（4）属性操作</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">getAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">hasAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_16-array-sort-方法与实现机制"><a href="#_16-array-sort-方法与实现机制" class="header-anchor">#</a> 16.Array.sort()方法与实现机制</h3> <p>sort 函数只给出了两种排序分别是： InsertionSort 和 QuickSort，数组长度小于等于 10 的用插入排序 InsertionSort，比 10 大的数组则使用快速排序 QuickSort</p> <h3 id="_17-ajax-的请求过程"><a href="#_17-ajax-的请求过程" class="header-anchor">#</a> 17.Ajax 的请求过程</h3> <p>相关知识点：</p> <p>2005 年 2 月，AJAX 这个词第一次正式提出，它是 Asynchronous JavaScript and XML 的缩写，指的是通过 JavaScript 的
异步通信，从服务器获取 XML 文档从中提取数据，再更新当前网页的对应部分，而不用刷新整个网页。</p> <p>具体来说，AJAX 包括以下几个步骤。</p> <ul><li>1.创建 XMLHttpRequest 对象，也就是创建一个异步调用对象</li> <li>2.创建一个新的 HTTP 请求，并指定该 HTTP 请求的方法、URL 及验证信息</li> <li>3.设置响应 HTTP 请求状态变化的函数</li> <li>4.发送 HTTP 请求</li> <li>5.获取异步调用返回的数据</li> <li>6.使用 JavaScript 和 DOM 实现局部刷新</li></ul> <p>一般实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">SERVER_URL</span> <span class="token operator">=</span> <span class="token string">&quot;/server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建 Http 请求</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置状态监听函数</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 当请求成功时</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 设置请求失败时的监听函数</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 设置请求头信息</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送 Http 请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// promise 封装实现：</span>

<span class="token keyword">function</span> <span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个 promise 对象</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 新建一个 http 请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置状态的监听函数</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      <span class="token comment">// 当请求成功或失败时，改变 promise 的状态</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置错误监听函数</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置响应的数据类型</span>
    xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置请求头信息</span>
    xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 发送 http 请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>回答：</p> <p>我对 ajax 的理解是，它是一种异步通信的方法，通过直接由 js 脚本向服务器发起 http 通信，然后根据服务器返回的数据，更新网页的相应部分，而不用刷新整个页面的一种方法。</p> <p>创建一个 ajax 有这样几个步骤：</p> <ul><li>首先是创建一个 XMLHttpRequest 对象。</li> <li>在这个对象上使用 open 方法创建一个 http 请求，open 方法所需要的参数是请求的方法、请求的地址、是否异步和用户的认证信息。</li> <li>在发起请求前，我们可以为这个对象添加一些信息和监听函数。比如说我们可以通过 setRequestHeader 方法来为请求添加头信息。我们还可以为这个对象添加一个状态监听函数。一个 XMLHttpRequest 对象一共有 5 个状态，当它的状态变化时会触发 onreadystatechange 事件，我们可以通过设置监听函数，来处理请求成功后的结果。当对象的 readyState 变为 4 的时候，代表服务器返回的数据接收完成，这个时候我们可以通过判断请求的状态，如果状态是 2xx 或者 304 的话则代表返回正常。这个时候我们就可以通过 response 中的数据来对页面进行更新了。</li> <li>当对象的属性和监听函数设置完成后，最后我们调用 send 方法来向服务器发起请求，可以传入参数作为发送的数据体。</li></ul> <h3 id="_18-js-的垃圾回收机制"><a href="#_18-js-的垃圾回收机制" class="header-anchor">#</a> 18.JS 的垃圾回收机制</h3> <p><strong>可达性</strong></p> <p>“可达”值是那些以某种方式可访问或可用的值。它们一定是存储在内存中的。</p> <p>1、固有可达值的集合：</p> <ul><li>当前函数的局部变量和参数</li> <li>嵌套调用时，当前调用链上所有函数的变量与参数</li> <li>全局变量</li> <li>（还有一些内部的）</li></ul> <p>统称为“根”</p> <p>2、如果一个值可以用过引用从根访问任何其他值，则认为该值是可达的。</p> <p>3、js引擎中有一个被叫做垃圾回收器的东西在监控着所有对象的状态，并删除掉那些不可达的值。</p> <p><strong>无法到达的孤岛</strong></p> <p>如果几个对象互相引用，但是外部没有对其任意对象的引用，这些对象也可能是不可达的，并被从内存中删除。</p> <p><strong>内部算法</strong></p> <p>基本算法<code>mark and sweep</code>:</p> <ul><li>垃圾收集器找到所有的根，并“标记”（记住）它们。</li> <li>然后它遍历并“标记”来自它们的所有引用。</li> <li>然后它遍历标记的对象并标记 <strong>它们的</strong> 引用。所有被遍历到的对象都会被记住，以免将来再次遍历到同一个对象。</li> <li>……如此操作，直到所有可达的（从根部）引用都被访问到。</li> <li>没有被标记的对象都会被删除。</li></ul> <p>一些优化建议：</p> <ul><li><strong>分代收集（Generational collection）</strong>—— 对象被分成两组：“新的”和“旧的”。许多对象出现，完成它们的工作并很快死去，它们可以很快被清理。那些长期存活的对象会变得“老旧”，而且被检查的频次也会减少。</li> <li><strong>增量收集（Incremental collection）</strong>—— 如果有许多对象，并且我们试图一次遍历并标记整个对象集，则可能需要一些时间，并在执行过程中带来明显的延迟。所以引擎试图将垃圾收集工作分成几部分来做。然后将这几部分会逐一进行处理。这需要它们之间有额外的标记来追踪变化，但是这样会有许多微小的延迟而不是一个大的延迟。</li> <li><strong>闲时收集（Idle-time collection）</strong>—— 垃圾收集器只会在 CPU 空闲时尝试运行，以减少可能对代码执行的影响。</li></ul> <p><strong>总结</strong></p> <p>主要需要掌握的内容：</p> <ul><li>垃圾回收是自动完成的，我们不能强制执行或是阻止执行。</li> <li>当对象是可达状态时，它一定是存在于内存中的。</li> <li>被引用与可访问（从一个根）不同：一组相互连接的对象可能整体都不可达。</li></ul> <h3 id="_19-js-中的-string、array-和-math-方法"><a href="#_19-js-中的-string、array-和-math-方法" class="header-anchor">#</a> 19.JS 中的 String、Array 和 Math 方法</h3> <ul><li><p>String 的方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;fighting 2021!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>stringObject.charAt(index)</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//h</span>
</code></pre></div><p><strong>stringObject.indexOf</strong>(str,startpos)
返回某个指定的字符串值在字符串中首次出现的位置</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;ht&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
</code></pre></div><p><strong>stringObject.split</strong>(separator,limit)
将字符串分割成字符串数组，并且返回此数组</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[ 'fighting', '2021!' ]</span>
</code></pre></div><p><strong>stringObject.substring</strong>(start,stop)
提取 start 和 stop 之间的字符串 stop 省略则一直提取到结尾</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//igh</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//figh</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ighting 2021!</span>
</code></pre></div><p><strong>stringObject.substr</strong>(start,length)
提取 start 开始的指定数目的字符串</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ighting 20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//21!</span>
</code></pre></div><p><strong>stringObject.replace(regexp/substr,newsubstr/function)</strong>
regexp/substr 必需，规定要替换掉的子字符串或要替换掉的模式的 RegExp 对象。
newsubstr/function 必需，规定了替换文本或生成替换文本的函数。
在字符串中用一些字符替换掉另一些字符，或替换掉一个与正则表达式匹配的子串。
返回经过替换操作后形成的新的字符串，不改变原字符串</p></li></ul> <p>https://www.cnblogs.com/lihuijuan/p/8490578.html</p> <h3 id="_20-addeventlistener-和-onclick-的区别"><a href="#_20-addeventlistener-和-onclick-的区别" class="header-anchor">#</a> 20.addEventListener 和 onClick()的区别</h3> <p>addEventListener 允许给一个事件注册多个监听器。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;addEvent&quot;</span><span class="token operator">&gt;</span>点击<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;onclick&quot;</span><span class="token operator">&gt;</span>点击<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">const</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.addEvent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是addEvent1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        btn1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是addEvent2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.onclick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是onclick1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是onclick2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><p>分别点击 btn1 和 btn2 的结果</p> <div class="language- extra-class"><pre class="language-text"><code>我是addEvent1
我是addEvent2
我是onclick2   //&quot;我是onclick1&quot;会被覆盖掉
</code></pre></div><p>结论：</p> <p>1.onclick 事件在同一时间只能指向唯一对象</p> <p>2.addEventListener 给一个事件注册多个 listener</p> <p>3.addEventListener 对任何 DOM 都是有效的，而 onclick 仅限于 HTML</p> <p>4.addEventListener 可以控制 listener 的触发阶段，（捕获/冒泡）。对于多个相同的事件处理器，不会重复触发，不需要手动使用 removeEventListener 清除</p> <p>5.IE9 使用 attachEvent 和 detachEvent</p> <p>参考：https://blog.csdn.net/viewyu12345/article/details/79171215</p> <h3 id="_21-new-和-object-create-的区别"><a href="#_21-new-和-object-create-的区别" class="header-anchor">#</a> 21.new 和 Object.create 的区别</h3> <p>https://juejin.cn/post/6941944148387692575</p> <p>Object.create创建的是完全数据字典对象，它之中没有原型（__proto__属性)</p> <h3 id="_22-dom-的-location-对象"><a href="#_22-dom-的-location-对象" class="header-anchor">#</a> 22.DOM 的 location 对象</h3> <p>**<code>Location</code>**接口表示其链接到的对象的位置（URL）。所做的修改反映在与之相关的对象上。</p> <p>1.此对象包含当前的 URL 信息，属性有以下几个：
1&gt; href 设置或获取整个 URL 为一个字串
2&gt; protocol 设置或获取 URL 对应的协议部分
3&gt; pathname 设置或获取 location 或者 URL 对应的主机名称
4&gt; port 设置或获取与 URL 关联的端口号
5&gt; host 设置或获取 location 或 URL 对应的主机名和端口号
6&gt; hostname 设置或获取 location 或 URL 对应的主机名
7&gt; search 设置或获取属性 href 中问号后的内容</p> <div class="language- extra-class"><pre><code>2. 对象包含的方法：
1&gt; assign		装入新的html文档
2&gt; reload		重新载入当前页面
3&gt; replace		装入指定URL的文档来替换当前文档
</code></pre></div><p>https://blog.csdn.net/persional_zhangchao/article/details/18409639</p> <h3 id="_23-浏览器从输入-url-到页面渲染的整个流程-涉及到计算机网络数据传输过程、浏览器解析渲染过程"><a href="#_23-浏览器从输入-url-到页面渲染的整个流程-涉及到计算机网络数据传输过程、浏览器解析渲染过程" class="header-anchor">#</a> 23.浏览器从输入 URL 到页面渲染的整个流程（涉及到计算机网络数据传输过程、浏览器解析渲染过程）</h3> <p>详细：https://blog.csdn.net/baidu_33438652/article/details/106586413?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control&amp;dist_request_id=1619663228401_05184&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control</p> <p>简单版：</p> <ul><li>首先用户从浏览器输入请求信息</li> <li>然后网络发起 URL 请求</li> <li>服务器响应请求之后，浏览器进程准备渲染进程</li> <li>渲染进程准备好之后，向渲染进程提交页面数据，称之为提交文档阶段</li> <li>渲染进程接受完文档信息，开始进行页面解析和资源加载</li> <li>最后完成整个页面加载</li></ul> <h3 id="_24-跨域、同源策略及跨域实现方式和原理"><a href="#_24-跨域、同源策略及跨域实现方式和原理" class="header-anchor">#</a> 24.跨域、同源策略及跨域实现方式和原理</h3> <p><strong>什么是跨域</strong></p> <p>当一个请求 url 的协议、域名、端口三者之间任意一个与当前页面 url 不同即为跨域。</p> <p><img src="/notes/assets/img/js-24-1.4a581db3.png" alt="js-24-1"></p> <p><img src="/notes/assets/img/js-24-2.a3e19145.png" alt="js-24-2"></p> <p><strong>同源策略</strong>：</p> <p>SOP 是一种约定，是浏览器最核心也是最基本的安全功能，同源是指“协议+域名+端口”三者相同，即便两个不同的域名指向同一个 ip 地址，也非同源。</p> <p>HTML 特殊标签</p> <p>link、script、img、frame 等标签具有跨域特性，可以直接访问。</p> <p>相关知识点：</p> <ol><li><p>通过 jsonp 跨域</p></li> <li><p>跨域资源共享（CORS)</p></li> <li><p>nginx 代理跨域</p></li> <li><p>WebSocket 协议跨域</p></li></ol> <p><img src="/notes/assets/img/js-24-3.1e318d18.png" alt="js-24-3"></p> <p>回答：</p> <p>1、使用 jsonp 来实现跨域请求，它的主要原理是通过动态构建 script  标签来实现跨域请求，因为浏览器对 script 标签的引入没有跨域的访问限制 。通过在请求的 url 后指定一个回调函数，然后服务器在返回数据的时候，构建一个 json 数据的包装，这个包装就是回调函数，然后返回给前端，前端接收到数据后，因为请求的是脚本文件，所以会直接执行，这样我们先前定义好的回调函数就可以被调用，从而实现了跨域请求的处理。这种方式只能用于 get 请求。</p> <p>2、使用 CORS 的方式，CORS 是一个 W3C 标准，全称是&quot;跨域资源共享&quot;。CORS 需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，因此我们只需要在服务器端配置就行。浏览器将 CORS 请求分成两类：简单请求和非简单请求。</p> <p>对于简单请求，浏览器直接发出 CORS 请求。具体来说，就是会在头信息之中，增加一个 Origin 字段。Origin 字段用来说明本次请求来自哪个源。服务器根据这个值，决定是否同意这次请求。对于如果 Origin 指定的源，不在许可范围内，服务器会返回一个正常的 HTTP 回应。浏览器发现，这个回应的头信息没有包含 Access-Control-Allow-Origin 字段，就知道出错了，从而抛出一个错误，ajax 不会收到响应信息。如果成功的话会包含一些以 Access-Control- 开头的字段。</p> <p>非简单请求，浏览器会先发出一次预检请求，来判断该域名是否在服务器的白名单中，如果收到肯定回复后才会发起请求。</p> <p>3、使用 websocket 协议，这个协议没有同源限制。</p> <p>4、使用服务器来代理跨域的访问请求，就是有跨域的请求操作时发送请求给后端，让后端代为请求，然后最后将获取的结果发返回。</p> <h3 id="_25-浏览器的回流-reflow-和重绘-repaints"><a href="#_25-浏览器的回流-reflow-和重绘-repaints" class="header-anchor">#</a> 25.浏览器的回流（Reflow）和重绘（Repaints）</h3> <p><strong>回流、重排</strong></p> <p>更新元素的几何属性需要重排。</p> <p><img src="https://img-blog.csdnimg.cn/20201213153952304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzMzNDM4NjUy,size_16,color_FFFFFF,t_70" alt="回流"></p> <p>从上图可以看出，如果通过 JavaScript 或者 CSS 修改元素的几何位置属性，例如改变元素的宽度、高度等，那么浏览器会触发重新布局，解析之后的一系列子阶段，这个过程就叫<strong>重排</strong>。</p> <p><strong>重排需要更新完整的渲染流水线</strong>，所以开销也是最大的。</p> <p><strong>重绘</strong></p> <p>通过 JavaScript 更改某些元素的背景颜色，会触发重绘</p> <p><img src="https://img-blog.csdnimg.cn/20201213155329899.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzMzNDM4NjUy,size_16,color_FFFFFF,t_70" alt="重绘"></p> <p>从图中可以看出，因为只修改了元素的背景颜色，并没有引起几何位置的变换，那么布局阶段将不会被执行，直接进入了绘制阶段，然后执行之后的一系列子阶段，这个过程就叫<strong>重绘</strong>。</p> <p>相较于重排操作，重绘省去了布局和分层阶段，所以执行效率会比重排操作要高一些。</p> <p><strong>直接合成</strong></p> <p><img src="https://img-blog.csdnimg.cn/20201213172500794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaWR1XzMzNDM4NjUy,size_16,color_FFFFFF,t_70" alt="合成"></p> <p>如图中显示，只用 transform 来实现动画效果，既不更改更改页面布局也不更改样式，渲染引擎将跳过布局和绘制，只执行后续的合成操作，我们把这个过程叫做合成。</p> <p>因为是在非主线程上合成，并没有占用主线程的资源，另外也避开了布局和绘制两个子阶段，所以相对于重绘和重排，合成能大大提升绘制效率。</p> <h3 id="_26-javascript-中的-arguments"><a href="#_26-javascript-中的-arguments" class="header-anchor">#</a> 26.JavaScript 中的 arguments</h3> <p>https://blog.csdn.net/qq_16339527/article/details/53231725</p> <h3 id="_27-eventloop-事件循环"><a href="#_27-eventloop-事件循环" class="header-anchor">#</a> 27.EventLoop 事件循环</h3> <p>事件队列是一个存储着待执行任务的队列，其中的任务严格按照时间先后顺序执行，排在队头的任务将会率先执行，而排在队尾的任务会最后执行。事件队列每次仅执行一个任务，在该任务执行完毕之后，再执行下一个任务。执行栈则是一个类似于函数调用栈的运行容器，当执行栈为空时，JS 引擎便检查事件队列，如果不为空的话，事件队列便将第一个任务压入执行栈中运行。</p> <p><strong>回答：</strong></p> <p>因为 js 是单线程运行的，在代码执行的时候，通过将不同函数的执行上下文压入执行栈中来保证代码的有序执行。在执行同步代码的时候，如果遇到了异步事件，js 引擎并不会一直等待其返回结果，而是会将这个事件挂起，继续执行执行栈中的其他任务。当异步事件执行完毕后，再将异步事件对应的回调加入到与当前执行栈中不同的另一个任务队列中等待执行。任务队列可以分为宏任务对列和微任务对列，当当前执行栈中的事件执行完毕后，js 引擎首先会判断微任务对列中是否有任务可以执行，如果有就将微任务队首的事件压入栈中执行。当微任务对列中的任务都执行完成后再去判断宏任务对列中的任务。</p> <p>微任务包括了 promise 的回调、node 中的 process.nextTick 、对 Dom 变化监听的 MutationObserver。</p> <p>宏任务包括了 script 脚本的执行、setTimeout ，setInterval ，setImmediate 一类的定时事件，还有如 I/O 操作、UI 渲染等。</p> <p><strong>流程：</strong></p> <ol><li>从 <strong>宏任务</strong> 队列（例如 “script”）中出队（dequeue）并执行最早的任务。</li> <li>执行所有微任务：
<ul><li>当微任务队列非空时：
<ul><li>出队（dequeue）并执行最早的微任务。</li></ul></li></ul></li> <li>执行渲染，如果有。</li> <li>如果宏任务队列为空，则休眠直到出现宏任务。</li> <li>转到步骤 1。</li></ol> <p><strong>安排（schedule）一个新的 宏任务：</strong></p> <ul><li>使用零延迟的 <code>setTimeout(f)</code>。</li></ul> <p>它可被用于将繁重的计算任务拆分成多个部分，以使浏览器能够对用户事件作出反应，并在任务的各部分之间显示任务进度。</p> <p>此外，也被用于在事件处理程序中，将一个行为（action）安排（schedule）在事件被完全处理（冒泡完成）后。</p> <p><strong>安排一个新的微任务：</strong></p> <ul><li>使用 <code>queueMicrotask(f)</code>。</li> <li>promise 处理程序也会通过微任务队列。</li></ul> <p>在微任务之间没有 UI 或网络事件的处理：它们一个立即接一个地执行。</p> <p>所以，我们可以使用 <code>queueMicrotask</code> 来在保持环境状态一致的情况下，异步地执行一个函数。</p> <h3 id="_28-宏任务与微任务"><a href="#_28-宏任务与微任务" class="header-anchor">#</a> 28.宏任务与微任务</h3> <table><thead><tr><th></th> <th style="text-align:left;">宏任务</th> <th>微任务</th></tr></thead> <tbody><tr><td>发起者</td> <td style="text-align:left;">宿主（node、浏览器）</td> <td>JS 引擎</td></tr> <tr><td>具体事件</td> <td style="text-align:left;">1. script (可以理解为外层同步代码)<br> 2. setTimeout/setInterval <br>3. UI rendering/UI 事件<br>4. postMessage，MessageChannel<br> 5. setImmediate，I/O（Node.js）</td> <td>1. Promise<br>2. MutaionObserver<br>3. Object.observe（已废弃；<code>Proxy</code> 对象替代）<br>4.process.nextTick（Node.js）</td></tr> <tr><td>谁先运行</td> <td style="text-align:left;">后运行</td> <td>先运行</td></tr> <tr><td>会触发新一轮 Tick 吗</td> <td style="text-align:left;">会</td> <td>不会</td></tr></tbody></table> <h3 id="_29-bom-属性对象方法"><a href="#_29-bom-属性对象方法" class="header-anchor">#</a> 29.BOM 属性对象方法</h3> <ol><li>window 对象</li> <li>location 对象</li> <li>history 对象</li></ol> <p>BOM 也叫浏览器对象模型，它提供了很多对象，用于访问浏览器的功能。BOM 缺少规范，每个浏览器提供商又按照自己想法去扩展它，那么浏览器共有对象就成了事实的标准。所以，BOM 本身是没有标准的或者还没有哪个组织去标准它。</p> <h3 id="_30-函数柯里化及其通用封装"><a href="#_30-函数柯里化及其通用封装" class="header-anchor">#</a> 30.函数柯里化及其通用封装</h3> <h3 id="_31js-的-map-和-reduce-方法"><a href="#_31js-的-map-和-reduce-方法" class="header-anchor">#</a> 31JS 的 map()和 reduce()方法</h3> <p>https://blog.csdn.net/wde_rensheng/article/details/90053814</p> <h3 id="_32-和-的区别"><a href="#_32-和-的区别" class="header-anchor">#</a> 32.“==”和“===”的区别</h3> <h3 id="_33-settimeout-用作倒计时为何会产生误差"><a href="#_33-settimeout-用作倒计时为何会产生误差" class="header-anchor">#</a> 33.setTimeout 用作倒计时为何会产生误差？</h3> <p>https://juejin.cn/post/6844903861925199886?utm_medium=hao.caibaojian.com&amp;utm_source=hao.caibaojian.com%3Futm_medium%3Dhao.caibaojian.com&amp;utm_source=hao.caibaojian.com</p> <h3 id="_34-一段帮助理解作用域、作用域链-执行上下文-闭包的代码"><a href="#_34-一段帮助理解作用域、作用域链-执行上下文-闭包的代码" class="header-anchor">#</a> 34.一段帮助理解作用域、作用域链，执行上下文，闭包的代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  [[Function: f],[Function: f],[Function: f],[Function: f],[Function: f]]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5</span>
</code></pre></div><p>执行上下文栈<code>ECStack</code>的执行循序</p> <div class="language- extra-class"><pre class="language-text"><code>ECStack.push(box);
ECStack.pop();
ECStack.push(f);
ECStack.pop();
</code></pre></div><h3 id="_35-js-实现双向绑定"><a href="#_35-js-实现双向绑定" class="header-anchor">#</a> 35.js 实现双向绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;inputxx&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1 id <span class="token operator">=</span> <span class="token string">'h1xx'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
       <span class="token keyword">function</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">var</span> _obj <span class="token operator">=</span> <span class="token punctuation">{</span>
           t<span class="token operator">:</span><span class="token string">'111'</span><span class="token punctuation">,</span>
           <span class="token keyword">get</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>t<span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token keyword">set</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token function">getId</span><span class="token punctuation">(</span><span class="token string">'inputxx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> n<span class="token punctuation">;</span>
               <span class="token function">getId</span><span class="token punctuation">(</span><span class="token string">'h1xx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> n<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>

       document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _obj<span class="token punctuation">.</span>fn <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_36-object-define-property"><a href="#_36-object-define-property" class="header-anchor">#</a> 36.object.define.property</h3> <p>意义：Object 对象 define 定义 property 属性 对象的 key</p> <h3 id="_37-undefined-与-undeclared-的区别"><a href="#_37-undefined-与-undeclared-的区别" class="header-anchor">#</a> 37. undefined 与 undeclared 的区别？</h3> <p>已在作用域中声明但还没有赋值的变量，是 undefined 的。</p> <p>还没有在作用域中声明过的变量，是 undeclared 的。</p> <p>对于 undeclared 变量的引用，浏览器会报引用错误，如 ReferenceError: b is not defined 。但是我们可以使用 typeof 的安全防范机制来避免报错，因为对于 undeclared（或者 not defined ）变量，typeof 会返回 &quot;undefined&quot;。</p> <h3 id="_38-null-和-undefined-的区别"><a href="#_38-null-和-undefined-的区别" class="header-anchor">#</a> 38. null 和 undefined 的区别？</h3> <p>首先 Undefined 和 Null 都是基本数据类型，这两个基本数据类型分别都只有一个值，就是 undefined 和 null。</p> <p>undefined：</p> <ul><li>声明了一个变量，但没有赋值</li> <li>访问对象上不存在的属性</li> <li>函数定义了形参，但没有传递实参</li> <li>使用 void 对表达式求值</li> <li>函数的默认返回值</li></ul> <p>null：</p> <p>null 的字面意思是<code>空值</code> ，这个值的语义是，希望表示一个对象被人为的重置为空对象，而非一个变量最原始的状态 。 在内存里的表示就是，<strong>栈中的变量没有指向堆中的内存对象</strong>。</p> <p>当我们对两种类型使用 typeof 进行判断的时候，Null 类型化会返回 “object”，这是一个历史遗留的问题。</p> <blockquote><p>null 有属于自己的类型 <code>Null</code>，而不属于 Object 类型，typeof 之所以会判定为 Object 类型，是因为 JavaScript 数据类型在底层都是以二进制的形式表示的，**二进制的前三位为 0 会被 typeof 判断为对象类型，而 null 的二进制位恰好都是 0 **，因此，null 被误判断为 Object 类型。</p></blockquote> <p>当我们使用双等号对两种类型的值进行比较时会返回 true，使用三个等号时会返回 false。</p> <blockquote><p>ES 规范中规定 null==undefined，可以理解为无效的值，和类型转换无关。</p></blockquote> <h3 id="_39-localstorage-sessionstorage-和-cookie-三种存储方式的用法和区别"><a href="#_39-localstorage-sessionstorage-和-cookie-三种存储方式的用法和区别" class="header-anchor">#</a> 39.localstorage，sessionstorage，和 cookie 三种存储方式的用法和区别</h3> <p><strong>Cookie存储方式</strong></p> <p>https://www.yuque.com/bujieyanbugaiwangming/txk1xr/kgpz2b</p> <p><strong>localstorage储存方式</strong></p> <p><code>localStorage</code> 是HTML5新加入的一个用来作为本地存储来使用的特性，解决了cookie存储空间不足的问题(cookie中每条cookie的存储空间为4k)，localStorage中一般浏览器支持的是5M大小，这个在不同的浏览器中localStorage会有所不同。<code>localStorage</code> 的生命周期是永久的，关闭页面或浏览器之后 <code>localStorage</code> 中的数据也不会消失。 <code>localStorage</code> `除非主动删除数据，否则数据永远不会消失。</p> <div class="language- extra-class"><pre class="language-text"><code>- 5M 大小
- 永久存储(除非手动清空)
- 多 tabs 也公用(浏览器标签页)需要同源,子域名不生效
</code></pre></div><p><strong>sessionstorage存储方式</strong></p> <p><code>sessionStorage</code> 与 <code>localStorage</code>相似，但是 <code>sessionStorage</code>  的生命周期是仅在当前会话下有效。 <code>sessionStorage</code> 引入了一个 <code>浏览器窗口</code> 的概念，<code>sessionStorage</code> 是在同源的窗口中始终存在的数据。只要这个浏览器窗口没有关闭，即使刷新页面或者进入同源另一个页面，数据依然存在。<code>sessionStorage</code>中一般浏览器支持的是5M大小, 但是 <code>sessionStorage</code> <code>在关闭了浏览器窗口后就会被销毁</code>。同时独立的打开同一个窗口同一个页面，<code>sessionStorage</code> 也是不一样的</p> <div class="language- extra-class"><pre class="language-text"><code>- 5M 大小
- 会话级别(关闭游览器会清空)
- 如果不同的tabs(浏览器标签页)同源也不行.
</code></pre></div><p><strong>注意</strong>:虽说不是同一个标签页不能获取,有一种情况除外,<strong>通过 a 链接</strong>的点击跳转(需要同源)</p> <p><strong>用法</strong>：（sessionStorage 和 localStorage 的用法一样，操作数据的API也是一样的）</p> <p>setItem（写入），getItem（读取）remove（删除），clear（清除）等</p> <p><strong>localStorage和sessionStorage区别</strong></p> <p>相同点</p> <ul><li>大小相同(5M)</li> <li>都是用来存储</li></ul> <p>不同点</p> <ul><li>生命周期不同(会话,和永久存储)</li> <li>策略不同(多标签页情况)</li></ul> <p><img src="https://img-blog.csdnimg.cn/20201201214439698.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NsdWVpYQ==,size_16,color_FFFFFF,t_70" alt=""></p> <h3 id="_40-事件冒泡捕获机制"><a href="#_40-事件冒泡捕获机制" class="header-anchor">#</a> 40.事件冒泡捕获机制</h3> <p>https://blog.csdn.net/luanlouis/article/details/23927347</p> <p>https://blog.csdn.net/m0_46217225/article/details/115328572?spm=1001.2014.3001.5501</p> <h3 id="_41-eventloop题"><a href="#_41-eventloop题" class="header-anchor">#</a> 41.eventloop题</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Promise 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Promise 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>script start
async1 start
async2
Promise 1
script end
async1 end
Promise 2
setTimeout
</code></pre></div><blockquote><p>遇到<code>await async2()</code>调用，发现async2也是一个 async 定义的函数，所有直接执行输出4，同时返回了一个Promise。<strong>划重点：此时返回的Promise被分配到微任务Event Queue中。await会让出线程，接下来就会跳出async1函数继续往下执行。</strong></p></blockquote> <h3 id="_42-轮播图"><a href="#_42-轮播图" class="header-anchor">#</a> 42.轮播图</h3> <p>https://blog.csdn.net/Slueia/article/details/110929878?spm=1001.2014.3001.5501</p> <h3 id="_43-js图片懒加载"><a href="#_43-js图片懒加载" class="header-anchor">#</a> 43.js图片懒加载</h3> <p>https://zhuanlan.zhihu.com/p/55311726</p> <h3 id="_44-v8引擎下的垃圾回收机制"><a href="#_44-v8引擎下的垃圾回收机制" class="header-anchor">#</a> 44.v8引擎下的垃圾回收机制</h3> <p><strong>堆结构的划分</strong></p> <ol><li>新空间(New-space)：大多数对象都分配在这里。 新空间很小，并且被设计为可以非常快速地进行垃圾回收，而与其他空间无关。其实这个新生空间对应的，就是前文的<strong>初始大陆</strong></li> <li>旧指针空间（Old-pointer-space）：包含大多数对象，这些对象可能具有指向其他对象的指针。 在新空间中生存了一段时间后，大多数对象都移到了这里。（特例也可以先不管）</li> <li>旧数据空间（Old-data-space）：包含仅包含原始数据的对象（没有指向其他对象的指针）。 在新空间中存活了一段时间后，字符串，装箱的数字和未装箱的双精度数组会移到此处。<strong>旧指针空间和旧数据空间合起来就称为旧空间。</strong></li> <li>大对象空间：此空间包含的对象大于其他空间的大小限制。 大对象永远不会被垃圾收集器移动。（可以先不管）</li> <li>代码空间：此处分配了包含JIT指令的代码对象。 这是唯一具有可执行内存的空间（尽管可以在大对象空间中分配代码，并且这些代码也是可执行的。（可以先不管）</li></ol> <p><strong>分代回收机制</strong></p> <p>整体配合机制如下：</p> <ol><li>在<strong>新空间</strong>分配新对象，直到空间充满，就触发<strong>小型回收机制</strong>；</li> <li>在小型回收机制中存活下2次的对象，就会被移动到旧空间去（根据数据特点分配到旧指针空间或者旧数据空间）；</li> <li>旧数据空间内存达到一定值的时候（这个阈值具体的参数先不用关注），触发<strong>大型回收机制</strong>（major garbage collection）；</li></ol> <p><strong>小型回收机制</strong></p> <p>小型回收机制，官方名称是scavenge， 它发生概率频繁，所以要求速度要比较快。基本算法思路源于著名的<a href="https://en.wikipedia.org/wiki/Cheney" target="_blank" rel="noopener noreferrer">Cheney算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，思路如下:</p> <ol><li>把新空间<code>(new-space)</code>均分为两部分，命名为from空间和to空间；（这两个空间不会同时使用）</li> <li>前面说的新对象的分配 是在to空间进行的，直到填满to空间为止；</li> <li>此时交换<code>from</code>空间和<code>to</code>空间，也就是把to空间的所有对象都移动到<code>from</code>空间，这一步执行完后，<code>to</code>空间变成空的，<code>from</code>是满的；</li> <li>在<code>from</code>空间，从<code>root</code>开始寻找所有可访问对象（这是上一篇的内容了，忘记了可以去回顾一下），然后把这些对象都移动到<code>to</code>空间或者<code>old</code>空间（某些已经挨过两次的就应该飞升了），这一步其实<code>v8</code>引擎还会顺便做一下压实（compacted）,也就是把存活的对象位置稍微集中一下，增加一下缓存的局部性，保持分配快速而简单；</li> <li>清空<code>from</code>空间（筛选剩下的都是可回收的了）</li></ol> <p><strong>如果某个对象只是被已经飞升到旧空间的数据对象引用了那么办呢？</strong></p> <p>为了解决这个问题，v8引擎在内存里维护了一个缓冲区，每当新<code>(new-space)</code>空间的对象被旧<code>(old-space)</code>空间的对象引用时， 这个旧空间对象的<code>key</code>将会被记录下来。</p> <p><strong>大型回收机制</strong></p> <p>小型回收机制<code>Scavenge</code>比较适合小区域的清理，因为它需要交换内存空间，有比较多内存开销，因为新空间比较小，所以这样做是没问题的， 对于要大的多的旧空间，就要用大型回收机制。</p> <p>大型回收机制指的就是我们前文说的标记-清除法，实际上包含分成<strong>标记-清除</strong>和<strong>标记-压实</strong>（压实的概念前面也说过了）两种。他们都是分2个阶段来运行的：</p> <ul><li><p><strong>标记</strong>阶段：本质上就是一场深度优先搜索：有三种颜色的标记（白色-初始状态，黑色-已检查状态；灰色-待检查状态）；</p> <ol><li>首先将所有的对象设置为<strong>白色</strong>，然后从root对象出发，将所有可以访问的对象标记为<strong>灰色</strong>。并用一个数组缓存起来；</li> <li>然后遍历该数组，每次都把要遍历的对象<strong>涂成黑色并移出</strong>，并且把他的相邻节点都涂成<strong>灰色</strong>，并放入队列，直到队列为空</li> <li>继续检查是否有<strong>灰色对象，如果有继续放入队列然后循环, 直到所有的可访问对象都变成黑色。</strong></li></ol></li> <li><p>**清除（或压实）**阶段：清除算法比较简单，根据上一步的查找结果，把对应白色标记对象内存地址转为自由空间； 压实算法相对复杂一些，核心的思路是把对象从比较分散的内存地址，集体迁移到其他某一块连续的内存地址里面，一般是另外选取一个连续内存块，然后把对象复制过去，并且在源对象上留下一个转发地址，在迁移过程中，记录下相关的指针位置，在完成整个迁移之后，更新指针指向新位置， 如果遇到某一块内存地址由于太多对象都要迁移过去，导致无法全部迁移，那么会等到下一个大回收周期再继续迁移。</p></li></ul> <p><strong>总结</strong></p> <ul><li>从大的方面来说，分成小回收周期和大的回收周期</li> <li>小回收周期发生在新空间，频率高，时间短速度快，运用chenny算法</li> <li>大回收周期发生在旧空间，频率低，速度慢，用深度优先遍历和三色标记法（黑白灰）</li> <li>优化方式主要是增量标记和延迟清理，核心思路是碎片化标记阶段和优先按需清理空间</li></ul> <h3 id="_45、let-const和var的区别"><a href="#_45、let-const和var的区别" class="header-anchor">#</a> 45、let  const和var的区别</h3> <ul><li>var定义的变量，没有块的概念，可以跨块访问, 不能跨函数访问。</li> <li>let定义的变量，只能在块作用域里访问，不能跨块访问，也不能跨函数访问。</li> <li>const用来定义常量，使用时必须初始化(即必须赋值)，只能在块作用域里访问，而且不能修改。</li></ul> <h3 id="_46、set和map"><a href="#_46、set和map" class="header-anchor">#</a> 46、set和map</h3> <p>Set：</p> <ul><li>成员唯一、无序且不重复。</li> <li>[value, value]，键值与键名是一致的（或者说只有键值，没有键名）。</li> <li>可以遍历，方法有：add、delete、has。</li></ul> <p>WeakSet：</p> <ul><li>成员都是对象。</li> <li>成员都是弱引用，可以被垃圾回收机制回收，可以用来保存DOM节点，不容易造成内存泄漏。</li> <li>不能遍历，方法有add、delete、has。</li></ul> <p>Map：</p> <ul><li>本质上是键值对的集合，类似集合。</li> <li>可以遍历，方法很多可以跟各种数据格式转换。</li></ul> <p>WeakMap：</p> <ul><li>只接受对象作为键名（null除外），不接受其他类型的值作为键名。</li> <li>键名是弱引用，键值可以是任意的，键名所指向的对象可以被垃圾回收，此时键名是无效的。</li> <li>不能遍历，方法有get、set、has、delete。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/experience/css-html.html" class="prev">
        css-html
      </a></span> <span class="next"><a href="/notes/experience/ES6.html">
        ES6
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.07575453.js" defer></script><script src="/notes/assets/js/2.3eba13e5.js" defer></script><script src="/notes/assets/js/4.5e24ac21.js" defer></script>
  </body>
</html>
