<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6 | Xxk&#39;notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/notes/assets/css/0.styles.04c41152.css" as="style"><link rel="preload" href="/notes/assets/js/app.07575453.js" as="script"><link rel="preload" href="/notes/assets/js/2.3eba13e5.js" as="script"><link rel="preload" href="/notes/assets/js/14.887ab298.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.e42fcb09.js"><link rel="prefetch" href="/notes/assets/js/11.cf9c4e89.js"><link rel="prefetch" href="/notes/assets/js/12.8716224a.js"><link rel="prefetch" href="/notes/assets/js/13.4d996839.js"><link rel="prefetch" href="/notes/assets/js/15.6f9d2279.js"><link rel="prefetch" href="/notes/assets/js/16.eac91036.js"><link rel="prefetch" href="/notes/assets/js/17.dfa56d25.js"><link rel="prefetch" href="/notes/assets/js/18.c0dd440e.js"><link rel="prefetch" href="/notes/assets/js/19.8772fd2d.js"><link rel="prefetch" href="/notes/assets/js/20.01d8f327.js"><link rel="prefetch" href="/notes/assets/js/21.bd9c35a0.js"><link rel="prefetch" href="/notes/assets/js/22.c49495d1.js"><link rel="prefetch" href="/notes/assets/js/23.1cdb2aaf.js"><link rel="prefetch" href="/notes/assets/js/24.45902c8f.js"><link rel="prefetch" href="/notes/assets/js/25.ec350de2.js"><link rel="prefetch" href="/notes/assets/js/26.0122d4b3.js"><link rel="prefetch" href="/notes/assets/js/3.87a95941.js"><link rel="prefetch" href="/notes/assets/js/4.5e24ac21.js"><link rel="prefetch" href="/notes/assets/js/5.8e40db70.js"><link rel="prefetch" href="/notes/assets/js/6.cb7cec23.js"><link rel="prefetch" href="/notes/assets/js/7.b4fa344a.js"><link rel="prefetch" href="/notes/assets/js/8.068642c5.js"><link rel="prefetch" href="/notes/assets/js/9.b2378d13.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.04c41152.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><img src="/notes/guagua.jpg" alt="Xxk'notes" class="logo"> <span class="site-name can-hide">Xxk'notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页|Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/experience/" class="nav-link router-link-active">
  面经
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Algorithm/" class="nav-link">
  Algorithm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他 | Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他 | Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Others/" class="nav-link">
  随想
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link">
  首页|Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端|Front-end</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/experience/" class="nav-link router-link-active">
  面经
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法|Algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Algorithm/" class="nav-link">
  Algorithm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他 | Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他 | Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/Others/" class="nav-link">
  随想
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面经</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/experience/计算机基础.html" class="sidebar-link">计算机网路</a></li><li><a href="/notes/experience/css-html.html" class="sidebar-link">css-html</a></li><li><a href="/notes/experience/javascript.html" class="sidebar-link">javascript</a></li><li><a href="/notes/experience/ES6.html" aria-current="page" class="active sidebar-link">ES6</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/experience/前端手撕代码.html" class="sidebar-link">手撕代码</a></li><li><a href="/notes/experience/vue.html" class="sidebar-link">Vue</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1、let、const-和-var-的概念与区别">1、let、const 和 var 的概念与区别</a></li><li><a href="#_2、-let-声明">2、 let 声明</a></li><li><a href="#_3-、const-声明">3 、const 声明</a></li><li><a href="#_2、变量提升与暂时性死区">2、变量提升与暂时性死区</a></li><li><a href="#_3、变量的结构赋值">3、变量的结构赋值</a></li><li><a href="#箭头函数及其-this-问题">箭头函数及其 this 问题</a></li><li><a href="#symbol-概念及其作用">Symbol 概念及其作用</a></li><li><a href="#set-和-map-数据结构">Set 和 Map 数据结构</a></li><li><a href="#proxy">Proxy</a></li><li><a href="#reflect-对象">Reflect 对象</a></li><li><a href="#promise-手撕-promise-a-规范、promise-all、promise-相关-api-和方法">Promise（手撕 Promise A+规范、Promise.all、Promise 相关 API 和方法）</a></li><li><a href="#iterator-和-for-of-iterator-遍历器的实现">Iterator 和 for...of（Iterator 遍历器的实现）</a></li><li><a href="#循环语法比较及使用场景-for、foreach、for-in、for-of">循环语法比较及使用场景（for、forEach、for...in、for...of）</a></li><li><a href="#generator-及其异步方面的应用">Generator 及其异步方面的应用</a></li><li><a href="#async-函数">async 函数</a></li><li><a href="#几种异步方式的比较-回调、settimeout、promise、generator、async">几种异步方式的比较（回调、setTimeout、Promise、Generator、async）</a></li><li><a href="#class-基本语法及继承">class 基本语法及继承</a></li><li><a href="#模块加载方案比较-commonjs-和-es6-的-module">模块加载方案比较（CommonJS 和 ES6 的 Module）</a></li><li><a href="#es6-模块加载与-commonjs-加载的原理">ES6 模块加载与 CommonJS 加载的原理</a></li></ul></div><p></p> <h3 id="_1、let、const-和-var-的概念与区别"><a href="#_1、let、const-和-var-的概念与区别" class="header-anchor">#</a> 1、let、const 和 var 的概念与区别</h3> <h4 id="_1-、var-关键字"><a href="#_1-、var-关键字" class="header-anchor">#</a> <strong>1 、var 关键字</strong></h4> <p>使用 var 操作符来定义变量，在不初始化的情况下，变量会保存一个特殊值 underfined。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>如上初始化变量不会将它标识为字符串类型，只是一个简单的赋值而已。</p> <p>（解释：js 是动态语言，message 的类型只有到运行时才能确定）</p> <p><strong>var 声明作用域</strong></p> <p>使用 var 操作符定义的变量会成为包含它的函数的局部变量</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span> <span class="token comment">//局部变量</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//出错！</span>
</code></pre></div><p>解释：1、函数之外不能读取函数内部的代码。2、函数变量将在函数退出时（函数执行完或者函数生命周期）被销毁。</p> <p>在函数内省略 var 可以创建一个全局变量，并且可以在函数外部访问到（不推荐且在严格模式下会报错 ）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  message <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span> <span class="token comment">//全局变量</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;hi&quot;</span>
</code></pre></div><p><strong>var 声明提升</strong></p> <p>使用 var 声明的变量会自动提升到函数作用域的顶部</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefind</span>
<span class="token comment">//实际执行顺序：</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> age<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>(要看词法分析)</em></p> <h3 id="_2、-let-声明"><a href="#_2、-let-声明" class="header-anchor">#</a> <strong>2、 let 声明</strong></h3> <ul><li><p>let 声明的是块作用域，而 var 声明的是函数作用域；</p></li> <li><p>块作用域是函数作用域的子集，函数内 let 定义的变量，函数外不能访问到。</p></li> <li><p>JavaScript 引擎会记录用于变量声明的标识符及其所在的块作用域。</p></li> <li><p>let 和 var 声明的并不是不同类型的变量，他们只是指出变量在相关作用域如何存在。</p></li> <li><p>let 不存在变量提升，变量声明必须在变量使用之前</p></li> <li><p>let 在相同的作用域内不可以重复声明同一个变量</p></li></ul> <p><strong>暂时性死区</strong></p> <p>let 声明的变量不会在作用域中被提升（let 声明变量之前，该变量都是不可用的），在 let 声明之前的瞬间叫做**<code>暂时性死区</code>**</p> <p>ES6 明确规定，如果区块中存在 let 和 const 命令，则这个区块对这些命令声明的变量从一开始就形成了<strong>封闭作用域</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//name会被提升</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined;</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;matt&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//age不会被提升</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ReferenceError:age没有定义,age的死区</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>typeof 也不再是个百分之百安全的操作，下述代码在 let 之前，都属于 x 的“死区”。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> x<span class="token punctuation">;</span> <span class="token comment">//error</span>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>隐蔽的死区</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> y<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//报错</span>
</code></pre></div><p>上述代码，在 y 被声明之前属于 y 的死区，所以 x=y 会报错，一下代码则不会报错。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">=</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[2,2]</span>
</code></pre></div></li> <li><p>在变量声明结束前使用变量也是会报错的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">//error</span>
</code></pre></div></li></ul> <p><strong>全局声明</strong></p> <p>let 在全局作用域中声明的变量不会成为 window 对象的属性，var 声明的变量则会</p> <p><strong>条件声明</strong></p> <p>let 的作用域是块，所以不可能检查前面是否已经使用</p> <h3 id="_3-、const-声明"><a href="#_3-、const-声明" class="header-anchor">#</a> <strong>3 、const 声明</strong></h3> <p>const 和 let 的基本相同，区别是 const 声明变量时必须同时初始化变量，且尝试修改 const 声明的变量会导致运行时错误</p> <p>const 变量引用的是一个对象，修改对象内部的属性并不违反 const 的限制</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> j <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//7,7,7,7,7</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//a,b</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> value <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//1,2,3,4,5</span>
</code></pre></div><h3 id="_2、变量提升与暂时性死区"><a href="#_2、变量提升与暂时性死区" class="header-anchor">#</a> 2、变量提升与暂时性死区</h3> <p><strong>暂时性死区</strong></p> <p>let 声明的变量不会在作用域中被提升（let 声明变量之前，该变量都是不可用的），在 let 声明之前的瞬间叫做**<code>暂时性死区</code>**</p> <p><strong>var 声明提升</strong></p> <p>使用 var 声明的变量会自动提升到函数作用域的顶部</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefind</span>
<span class="token comment">//实际执行顺序：</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> age<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3、变量的结构赋值"><a href="#_3、变量的结构赋值" class="header-anchor">#</a> 3、变量的结构赋值</h3> <h4 id="数组的解构赋值"><a href="#数组的解构赋值" class="header-anchor">#</a> 数组的解构赋值</h4> <p><strong>1、基本用法</strong></p> <p>ES6 允许按照一定模式从数组和对象中提取值，然后对变量进行赋值，这种被称为解构（Destructuring）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a<span class="token punctuation">,</span>
  b<span class="token punctuation">,</span>
  c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1,2,3</span>
</code></pre></div><p>本质上，只要等号两边的模式相同，左边的变量就会被赋予对应的值。</p> <ul><li>如果解构不成功，就会赋值 undefined。</li> <li>如果等号左边的模式只匹配一部分等号右边的数组，这种情况下会变成不完全解构。</li> <li>如果等号右边不是可遍历解构，那么就会报错。</li></ul> <blockquote><p>只要某种数据解构具有 Iterator 接口，就可以采用数组形式的解构</p></blockquote> <p>**2、**默认值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//x='a',y='b';</span>
</code></pre></div><blockquote><p>ES6 内部使用严格相等运算符（===）判断一个位置是否有值。所以如果一个数组元素不严格等于 undefined，默认值是不会生效的。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//null</span>
</code></pre></div><ul><li>默认值可以是一个表达式，但是该表达式是惰性求值的，即只有在用到时才会求值。</li> <li>默认值也可以其他变量，前提是该变量必须声明了。</li></ul> <h4 id="对象的解构赋值"><a href="#对象的解构赋值" class="header-anchor">#</a> 对象的解构赋值</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&quot;bbb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
foo<span class="token punctuation">;</span> <span class="token comment">//aaa</span>
bar<span class="token punctuation">;</span> <span class="token comment">//bbb</span>
</code></pre></div><p><strong>对象解构和数组解构的不同点：</strong></p> <ul><li>数组的元素是按次序排列的，变量的取值是由它的位置决定的；</li> <li>对象的属性没有次序，变量必须与属性同名才能取到正确的值；</li></ul> <p>如果变量名与属性名不一致，可以写成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&quot;bbb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
baz<span class="token punctuation">;</span> <span class="token comment">//&quot;aaa&quot;</span>
</code></pre></div><p>对象的解构赋值的内部机制是先找到同名属性，然后再赋值给对应的变量，真正被赋值的是后者，而不是前者；</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&quot;bbb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
baz<span class="token punctuation">;</span> <span class="token comment">//&quot;aaa&quot;</span>
boo<span class="token punctuation">;</span> <span class="token comment">//error:foo is not defined</span>
</code></pre></div><p>上述代码中，foo 是模式，baz 才是变量。真正被赋值的是变量 baz，而不是模式 foo。非别名解构赋值应该是下面形式的简写：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> foo<span class="token punctuation">,</span> bar<span class="token operator">:</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token string">&quot;bbb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>对象解构也可以指定默认值。生效条件是对象的属性值严格等于 undefined。</p> <p>如果解构模式是嵌套的对象，如果子对象所在的父属性不存在，那么将会报错。</p> <p>如果要将一个已经声明的变量用于解构赋值，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> x<span class="token punctuation">;</span>
<span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//error</span>
</code></pre></div><p>**原因：**js 引擎会将{x}理解成一个代码块，正确操作为：<code>({x} = {x:1})</code></p> <h4 id="字符串、数值和布尔类型解构赋值"><a href="#字符串、数值和布尔类型解构赋值" class="header-anchor">#</a> 字符串、数值和布尔类型解构赋值</h4> <h4 id="函数声明解构赋值"><a href="#函数声明解构赋值" class="header-anchor">#</a> 函数声明解构赋值</h4> <h4 id="圆括号规则"><a href="#圆括号规则" class="header-anchor">#</a> 圆括号规则</h4> <h4 id="解构使用场景"><a href="#解构使用场景" class="header-anchor">#</a> 解构使用场景</h4> <h3 id="箭头函数及其-this-问题"><a href="#箭头函数及其-this-问题" class="header-anchor">#</a> 箭头函数及其 this 问题</h3> <h3 id="symbol-概念及其作用"><a href="#symbol-概念及其作用" class="header-anchor">#</a> Symbol 概念及其作用</h3> <h3 id="set-和-map-数据结构"><a href="#set-和-map-数据结构" class="header-anchor">#</a> Set 和 Map 数据结构</h3> <h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <h3 id="reflect-对象"><a href="#reflect-对象" class="header-anchor">#</a> Reflect 对象</h3> <h3 id="promise-手撕-promise-a-规范、promise-all、promise-相关-api-和方法"><a href="#promise-手撕-promise-a-规范、promise-all、promise-相关-api-和方法" class="header-anchor">#</a> Promise（手撕 Promise A+规范、Promise.all、Promise 相关 API 和方法）</h3> <h3 id="iterator-和-for-of-iterator-遍历器的实现"><a href="#iterator-和-for-of-iterator-遍历器的实现" class="header-anchor">#</a> Iterator 和 for...of（Iterator 遍历器的实现）</h3> <h3 id="循环语法比较及使用场景-for、foreach、for-in、for-of"><a href="#循环语法比较及使用场景-for、foreach、for-in、for-of" class="header-anchor">#</a> 循环语法比较及使用场景（for、forEach、for...in、for...of）</h3> <h3 id="generator-及其异步方面的应用"><a href="#generator-及其异步方面的应用" class="header-anchor">#</a> Generator 及其异步方面的应用</h3> <h3 id="async-函数"><a href="#async-函数" class="header-anchor">#</a> async 函数</h3> <h3 id="几种异步方式的比较-回调、settimeout、promise、generator、async"><a href="#几种异步方式的比较-回调、settimeout、promise、generator、async" class="header-anchor">#</a> 几种异步方式的比较（回调、setTimeout、Promise、Generator、async）</h3> <h3 id="class-基本语法及继承"><a href="#class-基本语法及继承" class="header-anchor">#</a> class 基本语法及继承</h3> <h3 id="模块加载方案比较-commonjs-和-es6-的-module"><a href="#模块加载方案比较-commonjs-和-es6-的-module" class="header-anchor">#</a> 模块加载方案比较（CommonJS 和 ES6 的 Module）</h3> <h3 id="es6-模块加载与-commonjs-加载的原理"><a href="#es6-模块加载与-commonjs-加载的原理" class="header-anchor">#</a> ES6 模块加载与 CommonJS 加载的原理</h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/experience/javascript.html" class="prev">
        javascript
      </a></span> <span class="next"><a href="/notes/experience/前端手撕代码.html">
        手撕代码
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.07575453.js" defer></script><script src="/notes/assets/js/2.3eba13e5.js" defer></script><script src="/notes/assets/js/14.887ab298.js" defer></script>
  </body>
</html>
